---
import Layout from '@layouts/MainLayout.astro';
import Card from '@components/blog/Card.astro';
import { formatDate } from 'src/utils';

import MostRecentCard from '@components/blog/MostRecentArticle.astro';

import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
const blog: CollectionEntry<'blog'>[] = (await getCollection('blog')).sort(
  (a: CollectionEntry<'blog'>, b: CollectionEntry<'blog'>) =>
    b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const mostRecentArticle: CollectionEntry<'blog'> = blog[0];
const otherArticles: CollectionEntry<'blog'>[] = blog.slice(1);

// SEO
import { BLOG_PAGE_SEO } from '@config';
---

<Layout
  title={BLOG_PAGE_SEO.title}
  seoDesc={BLOG_PAGE_SEO.seoDesc}
  ogImage={BLOG_PAGE_SEO.ogImage}
  url={BLOG_PAGE_SEO.url}
  doamin={BLOG_PAGE_SEO.domain}
>
  <main>
    <div class='container mx-auto lg:py-8'>
      <div class='py-6'>
        <div class='flex justify-center'>
          <div
            class='bg-wood-50 dark:bg-wood-950/50 border border-wood-100 dark:border-wood-800/50 py-1 px-4 rounded-full duration-1000'
          >
            <h1
              class='text-lg md:text-xl text-center text-wood-800 dark:text-wood-400'
            >
              Blog
            </h1>
          </div>
        </div>
        <p class='mt-2 text-lg text-center text-gray-600 dark:text-gray-400'>
          Insights, thoughts and trends in design.<br class='hidden sm:block' />
          Explore my insightful articles.
        </p>
      </div>
      <MostRecentCard article={mostRecentArticle} />
      <div class='grid lg:grid-cols-2 xl:grid-cols-3 gap-4 justify-center mt-4'>
        {
          otherArticles
            .slice(0)
            .map((post) => (
              <Card
                link={`/blog/${post.slug}`}
                imgSrc={post.data.image}
                imgAlt={post.slug}
                category={post.data.category}
                title={post.data.title}
                readingTime={post.data.readingTime}
                pubDate={formatDate(post.data.pubDate)}
              />
            ))
        }
      </div>
    </div>
  </main>
</Layout>
